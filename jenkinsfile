pipeline {
 agent any
   environment{
         CLOUDSDK_CORE_PROJECT = 'magnetic-quasar-378605'
 }
stages{
 stage('Checkout') {
     steps {
          git branch: 'main', url: 'https://github.com/neetubaghel4567/Jenkins1'
     }
  }
 stage('gcp_authentication'){
   Steps{
  sh 'gcloud auth activate-service-account --key-file $GOOGLE_APPLICATION_CREDENTIALS   }
 }
 stage('Terraform Init') {
  steps {
        sh 'terraform init'
          }
   }
  stage('Approve') {
     steps {
         input message: 'Are you sure you want to apply these changes?', ok: 'Approve'
    }
 stage('Terraform Plan') {
 steps {
      sh 'terraform plan'
  }
 }
  stage('Approve') {
     steps {
         input message: 'Are you sure you want to apply these changes?', ok: 'Approve'
    }
  }
  stage('Terraform Apply') {
    steps {
      sh 'terraform apply -auto-approve'
     }
    }
   }
}
